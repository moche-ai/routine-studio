# Routine Studio v2 에이전트 시스템

## 개요

유튜브 콘텐츠 자동화를 위한 에이전트 시스템입니다.

## 아키텍처

```
┌─────────────────────────────────────────────────────────┐
│                    Orchestrator                          │
│  - 세션 관리                                             │
│  - 에이전트 라우팅                                        │
│  - 워크플로우 상태 관리                                   │
└─────────────────────┬───────────────────────────────────┘
                      │
    ┌─────────────────┴─────────────────┐
    │                                   │
┌───▼───────────┐           ┌──────────▼────────┐
│ PlannerAgent  │           │ CharacterAgent    │
│               │           │                   │
│ - 채널명 생성 │──────────▶│ - 캐릭터 이미지   │
│ - 영상 아이디어│           │ - 피드백 루프     │
│ - 대본 작성   │◀──────────│                   │
└───────────────┘           └───────────────────┘
        │                           │
        ▼                           ▼
    LLM Service              ComfyUI Service
    (gpt-oss-120b)           (localhost:8188)
```

## 워크플로우 단계

### 1단계: 채널명 생성 (PlannerAgent)
- 사용자 요청 분석
- LLM으로 채널명 후보 10개 생성
- 사용자 선택/피드백 대기

### 2단계: 캐릭터 생성 (CharacterAgent)
- 채널 컨셉에 맞는 캐릭터 설명 생성
- ComfyUI SDXL 워크플로우로 이미지 생성
- 피드백 루프: 사용자가 만족할 때까지 수정

### 3단계: 영상 아이디어 (PlannerAgent)
- 채널 정보 기반 아이디어 20개 생성
- 트렌디하고 독창적인 주제 제안
- 사용자 선택

### 4단계: 대본 작성 (PlannerAgent)
- 선택된 아이디어로 10-15분 분량 대본 작성
- 캐릭터 말투/스타일 반영
- 구조: 오프닝 → 인트로 → 본론 → 결론

## 상태 관리

```python
class AgentStatus(Enum):
    IDLE = "idle"               # 대기 중
    RUNNING = "running"         # 실행 중
    WAITING_FEEDBACK = "waiting_feedback"  # 피드백 대기
    COMPLETED = "completed"     # 완료
    ERROR = "error"             # 에러
```

## 프론트엔드 연동

### 진행 상태 표시
- 각 단계별 진행률 실시간 표시
- 현재 작업 상세 설명
- 소요 시간 카운터
- 에러 시 명확한 피드백

### API 엔드포인트
- `POST /api/agents/start` - 워크플로우 시작
- `POST /api/agents/message` - 메시지/피드백 전송
- `GET /api/agents/session/{id}` - 세션 상태 조회

## 확장 예정

- 5단계: TTS 음성 생성
- 6단계: 스토리보드 이미지 생성
- 7단계: Remotion 영상 편집
- 8단계: 자동 업로드
